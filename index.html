<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>root@server: ~</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1e1e1e;
            --text-color: #cccccc;
            --prompt-user: #50fa7b; /* Dracula Green */
            --prompt-path: #bd93f9; /* Dracula Purple */
            --cmd-color: #f8f8f2;
            --dir-color: #8be9fd; /* Dracula Cyan */
            --file-color: #f1fa8c; /* Dracula Yellow */
            --error-color: #ff5555;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            margin: 0;
            padding: 20px;
            height: 100vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #terminal-output {
            flex: 1;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-bottom: 10px;
        }

        /* Custom Scrollbar */
        #terminal-output::-webkit-scrollbar { width: 8px; }
        #terminal-output::-webkit-scrollbar-track { background: var(--bg-color); }
        #terminal-output::-webkit-scrollbar-thumb { background: #44475a; border-radius: 4px; }

        .input-line {
            display: flex;
            align-items: center;
            background-color: #282a36;
            padding: 10px;
            border-radius: 4px;
        }

        .prompt { margin-right: 10px; white-space: nowrap; }
        .user { color: var(--prompt-user); font-weight: bold; }
        .at { color: var(--text-color); }
        .host { color: var(--prompt-user); font-weight: bold; }
        .path { color: var(--prompt-path); font-weight: bold; }
        .char { color: var(--text-color); }

        input {
            background: transparent;
            border: none;
            color: var(--cmd-color);
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            flex-grow: 1;
            outline: none;
        }

        /* Output Styling */
        .line { margin-bottom: 4px; line-height: 1.5; }
        .cmd-echo { color: #f8f8f2; font-weight: bold; }
        .dir { color: var(--dir-color); font-weight: bold; cursor: pointer; }
        .file { color: var(--file-color); }
        .comment { color: #6272a4; font-style: italic; }
        .error { color: var(--error-color); }
        
        /* Links */
        a { color: #8be9fd; text-decoration: none; border-bottom: 1px dotted #8be9fd; }
        a:hover { background: #44475a; }
    </style>
</head>
<body>

    <div id="terminal-output"></div>
    
    <div class="input-line">
        <div class="prompt">
            <span class="user">visitor</span><span class="at">@</span><span class="host">portfolio</span>:<span class="path" id="path-display">~</span><span class="char">$</span>
        </div>
        <input type="text" id="cmd-input" autocomplete="off" spellcheck="false" autofocus>
    </div>

<script>
    // --- FILE SYSTEM STRUCTURE ---
    // Professional approach: Objects represent folders, Strings represent files.
    const fileSystem = {
        "~": {
            "about.txt": "I am a Full Stack Developer and Cybersecurity Enthusiast.\nSpecializing in Python, JavaScript, and Ethical Hacking.",
            "contact.md": "Email: your.email@example.com\nGitHub: github.com/yourusername\nLinkedIn: linkedin.com/in/yourprofile",
            "skills.txt": "• Languages: Python, C++, HTML/JS\n• Tools: Burp Suite, Metasploit, Wireshark\n• OS: Kali Linux, Arch, Ubuntu",
            "projects": {
                "network-scanner.py": "Language: Python\nStatus: Completed\nDescription: A multi-threaded IP scanner.\n[Run 'cat projects/network-scanner.py' to see details]",
                "web-scraper.js": "Language: Node.js\nStatus: In Progress\nDescription: Scrapes tech news headers.",
                "portfolio-v1": {
                    "index.html": "<Old version of portfolio>",
                    "style.css": "body { background: red; }"
                }
            },
            "README.md": "Welcome to my interactive portfolio.\nType 'help' for commands.\nUse 'Tab' for autocomplete."
        }
    };

    // --- STATE MANAGEMENT ---
    let currentPath = ["~"];
    let commandHistory = [];
    let historyIndex = -1;

    const outputDiv = document.getElementById('terminal-output');
    const inputField = document.getElementById('cmd-input');
    const pathDisplay = document.getElementById('path-display');

    // --- INITIALIZATION ---
    window.onload = () => {
        printLine(`Last login: ${new Date().toUTCString()} on ttys001`, 'comment');
        printLine(`Welcome to the interactive shell. Type 'help' to start.`, 'comment');
        printLine(``);
    };

    // --- COMMAND PROCESSOR ---
    inputField.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            const cmdRaw = inputField.value;
            const cmdTrim = cmdRaw.trim();
            
            if (cmdTrim) {
                // Add to history
                commandHistory.push(cmdTrim);
                historyIndex = commandHistory.length;
                
                // Print command prompt line
                const promptHtml = `<span class="user">visitor</span>@<span class="host">portfolio</span>:<span class="path">${currentPath.join('/')}</span>$ <span class="cmd-echo">${cmdRaw}</span>`;
                printHtml(promptHtml);

                // Execute
                executeCommand(cmdTrim);
            } else {
                 // Empty enter just prints a new line
                 const promptHtml = `<span class="user">visitor</span>@<span class="host">portfolio</span>:<span class="path">${currentPath.join('/')}</span>$`;
                 printHtml(promptHtml);
            }

            inputField.value = '';
            scrollToBottom();
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            if (historyIndex > 0) {
                historyIndex--;
                inputField.value = commandHistory[historyIndex];
            }
        } else if (e.key === 'ArrowDown') {
            e.preventDefault();
            if (historyIndex < commandHistory.length - 1) {
                historyIndex++;
                inputField.value = commandHistory[historyIndex];
            } else {
                historyIndex = commandHistory.length;
                inputField.value = '';
            }
        } else if (e.key === 'Tab') {
            e.preventDefault();
            handleTabCompletion(inputField.value);
        }
    });

    function executeCommand(cmdStr) {
        const parts = cmdStr.split(' ');
        const cmd = parts[0].toLowerCase();
        const args = parts.slice(1);

        switch (cmd) {
            case 'help':
                printLine(`
  GNU/Linux Style Portfolio Shell, version 1.0.2-release
  These shell commands are defined internally:

  ls [dir]    List directory contents
  cd [dir]    Change directory
  cat [file]  Print file content
  clear       Clear terminal window
  pwd         Print working directory
  whoami      Print effective userid
  history     View command history
  open [url]  Open external link
                `);
                break;

            case 'clear':
                outputDiv.innerHTML = '';
                break;

            case 'whoami':
                printLine('visitor');
                break;

            case 'pwd':
                printLine(currentPath.join('/'));
                break;
            
            case 'history':
                commandHistory.forEach((c, i) => printLine(`${i + 1}  ${c}`));
                break;

            case 'ls':
                const targetDir = args[0] ? resolvePath(args[0]) : getCurrentDirObject();
                if (typeof targetDir === 'object') {
                    const items = Object.keys(targetDir);
                    if(items.length === 0) printLine("(empty)", "comment");
                    else {
                        // Format output to look like 'ls --color'
                        const formatted = items.map(item => {
                            const isDir = typeof targetDir[item] === 'object';
                            return `<span class="${isDir ? 'dir' : 'file'}">${item}${isDir ? '/' : ''}</span>`;
                        }).join('  ');
                        printHtml(formatted);
                    }
                } else {
                    printLine(`ls: cannot access '${args[0]}': No such file or directory`, 'error');
                }
                break;

            case 'cd':
                if (!args[0] || args[0] === '~') {
                    currentPath = ["~"];
                } else if (args[0] === '..') {
                    if (currentPath.length > 1) currentPath.pop();
                } else {
                    const newDirObj = resolvePath(args[0]);
                    if (typeof newDirObj === 'object') {
                        // This is a simplification; a real path parser would be more complex
                        // For this demo, we assume one level deeper relative path
                        if (getCurrentDirObject()[args[0]]) {
                            currentPath.push(args[0]);
                        } else {
                            // Handle absolute paths or errors simplified
                             printLine(`cd: ${args[0]}: No such file or directory`, 'error');
                        }
                    } else {
                        printLine(`cd: ${args[0]}: Not a directory`, 'error');
                    }
                }
                updatePromptPath();
                break;

            case 'cat':
                if (!args[0]) { printLine("Usage: cat [filename]", "comment"); break; }
                const content = resolvePath(args[0]);
                if (typeof content === 'string') {
                    printLine(content);
                } else if (typeof content === 'object') {
                    printLine(`cat: ${args[0]}: Is a directory`, 'error');
                } else {
                    printLine(`cat: ${args[0]}: No such file or directory`, 'error');
                }
                break;
            
            case 'sudo':
                printLine(`[sudo] password for visitor:`, 'comment');
                setTimeout(() => {
                    printLine(`Sorry, user visitor is not allowed to execute commands as root.`, 'error');
                    scrollToBottom();
                }, 1500);
                break;

            case 'open':
                if (!args[0]) printLine("Usage: open [url]");
                else {
                    window.open(args[0].startsWith('http') ? args[0] : 'http://' + args[0], '_blank');
                    printLine(`Opening ${args[0]}...`, 'comment');
                }
                break;

            default:
                printLine(`${cmd}: command not found`, 'error');
        }
    }

    // --- UTILITIES ---
    
    function getCurrentDirObject() {
        let current = fileSystem["~"];
        for (let i = 1; i < currentPath.length; i++) {
            current = current[currentPath[i]];
        }
        return current;
    }

    function resolvePath(pathName) {
        // Simple relative path resolver
        const current = getCurrentDirObject();
        return current[pathName];
    }

    function updatePromptPath() {
        pathDisplay.innerText = currentPath.join('/');
    }

    function printLine(text, type = '') {
        const div = document.createElement('div');
        div.className = `line ${type}`;
        div.innerText = text;
        outputDiv.appendChild(div);
        scrollToBottom();
    }
    
    function printHtml(html) {
        const div = document.createElement('div');
        div.className = `line`;
        div.innerHTML = html;
        outputDiv.appendChild(div);
        scrollToBottom();
    }

    function scrollToBottom() {
        outputDiv.scrollTop = outputDiv.scrollHeight;
    }

    // Tab Completion Logic
    function handleTabCompletion(currentInput) {
        const parts = currentInput.split(' ');
        const lastPart = parts[parts.length - 1];
        const currentDirObj = getCurrentDirObject();
        const available = Object.keys(currentDirObj);
        
        const matches = available.filter(item => item.startsWith(lastPart));
        
        if (matches.length === 1) {
            parts[parts.length - 1] = matches[0];
            inputField.value = parts.join(' ');
        } else if (matches.length > 1) {
            printHtml(`<span class="user">visitor</span>@<span class="host">portfolio</span>:$ <span class="cmd-echo">${currentInput}</span>`);
            printLine(matches.join('  '), 'comment');
        }
    }

</script>
</body>
</html>
