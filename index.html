<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>root@kali: ~</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap');

        body {
            background-color: #1e1e1e; /* VS Code Dark Grey */
            color: #d4d4d4;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            margin: 0;
            padding: 10px;
            height: 100vh;
            box-sizing: border-box;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        #terminal-window {
            flex: 1;
            overflow-y: auto;
            white-space: pre-wrap; /* Preserves formatting */
            padding-bottom: 20px;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #1e1e1e; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Text Colors */
        .prompt-user { color: #50fa7b; font-weight: bold; } /* Green */
        .prompt-symbol { color: #ff79c6; } /* Pink */
        .prompt-path { color: #8be9fd; font-weight: bold; } /* Cyan */
        .cmd-text { color: #f8f8f2; }
        
        .output { margin-bottom: 8px; line-height: 1.5; color: #ccc; }
        .error { color: #ff5555; }
        .success { color: #50fa7b; }
        .info { color: #8be9fd; }
        .keyword { color: #bd93f9; } /* Purple */

        /* Input Area */
        .input-line { display: flex; align-items: center; }
        input {
            background: transparent;
            border: none;
            color: #f8f8f2;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            flex-grow: 1;
            outline: none;
            margin-left: 5px;
        }

        /* Fake Cursor */
        .cursor-block {
            display: inline-block;
            width: 8px;
            height: 16px;
            background-color: #ccc;
            animation: blink 1s step-end infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

    </style>
</head>
<body>

    <div id="terminal-window" onclick="document.getElementById('cmd').focus()">
        <div id="history"></div>
        
        <div class="input-line">
            <div id="prompt-container">
                </div>
            <input type="text" id="cmd" autocomplete="off" spellcheck="false" autofocus>
        </div>
    </div>

<script>
    // --- SYSTEM CONFIG ---
    const user = "visitor";
    const host = "kali";
    let currentPath = "~";
    
    // Command History Storage (for Up/Down arrows)
    let commandHistory = [];
    let historyIndex = -1;

    // File System Simulation
    const fileSystem = {
        "~": {
            "projects": "dir",
            "cv.pdf": "file",
            "contact_info.txt": "file",
            "todo.md": "file"
        },
        "~/projects": {
            "main.py": "file",
            "scan_results.log": "file"
        }
    };

    const fileContents = {
        "contact_info.txt": "Email: user@example.com\nLinkedIn: linkedin.com/in/user\nGitHub: github.com/user",
        "todo.md": "- [x] Setup server\n- [ ] Patch vulnerabilities\n- [ ] Update documentation",
        "cv.pdf": "[PDF Binary Data] - Cannot display in terminal. Use 'download cv.pdf'",
        "scan_results.log": "Target: 192.168.1.1\nOpen Ports: 22, 80, 443\nVulnerabilities: None detected."
    };

    // DOM Elements
    const terminal = document.getElementById('history');
    const input = document.getElementById('cmd');
    const promptContainer = document.getElementById('prompt-container');

    // Generate Prompt String
    function updatePrompt() {
        promptContainer.innerHTML = `
            <span class="prompt-symbol">┌──(</span>
            <span class="prompt-user">${user}㉿${host}</span>
            <span class="prompt-symbol">)-[</span>
            <span class="prompt-path">${currentPath}</span>
            <span class="prompt-symbol">]</span><br>
            <span class="prompt-symbol">└─$</span>
        `;
    }
    updatePrompt();

    // Start with a clean welcome message
    const date = new Date().toString();
    printOutput(`Linux ${host} 6.6.9-amd64 #1 SMP PREEMPT_DYNAMIC Kali 2025.1 x86_64\nLast login: ${date} from 10.0.2.2`, 'system');

    // --- EVENT LISTENERS ---
    input.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            const command = this.value;
            if (command.trim() !== "") {
                // Save to history
                commandHistory.push(command);
                historyIndex = commandHistory.length;
                
                // Print command to screen
                const oldPrompt = promptContainer.innerHTML;
                const cmdLine = document.createElement('div');
                cmdLine.innerHTML = `<div class="input-line">${oldPrompt} <span class="cmd-text">${command}</span></div>`;
                terminal.appendChild(cmdLine);

                // Process
                processCommand(command.trim());
            } else {
                // Just reprint prompt on empty enter
                const oldPrompt = promptContainer.innerHTML;
                const cmdLine = document.createElement('div');
                cmdLine.innerHTML = `<div class="input-line">${oldPrompt}</div>`;
                terminal.appendChild(cmdLine);
            }
            
            // Clear input
            this.value = '';
            scrollToBottom();
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            if (historyIndex > 0) {
                historyIndex--;
                input.value = commandHistory[historyIndex];
            }
        } else if (e.key === 'ArrowDown') {
            e.preventDefault();
            if (historyIndex < commandHistory.length - 1) {
                historyIndex++;
                input.value = commandHistory[historyIndex];
            } else {
                historyIndex = commandHistory.length;
                input.value = '';
            }
        }
    });

    // --- CORE LOGIC ---
    function processCommand(cmdRaw) {
        const args = cmdRaw.split(' ');
        const cmd = args[0].toLowerCase();
        const arg1 = args[1];

        switch (cmd) {
            case 'help':
                printOutput(`
    GNU bash, version 5.2.21(1)-release (x86_64-pc-linux-gnu)
    These shell commands are defined internally. Type 'help' to see this list.

    <span class="keyword">ls</span>       List directory contents
    <span class="keyword">cd</span>       Change directory (e.g., 'cd projects' or 'cd ..')
    <span class="keyword">cat</span>      Concatenate files to standard output
    <span class="keyword">clear</span>    Clear the terminal screen
    <span class="keyword">whoami</span>   Print effective userid
    <span class="keyword">nmap</span>     Network exploration tool and security scanner
    <span class="keyword">neofetch</span> System information tool
                `);
                break;

            case 'clear':
                terminal.innerHTML = '';
                break;

            case 'ls':
                const dirContent = fileSystem[currentPath];
                let output = "";
                for (const [key, value] of Object.entries(dirContent)) {
                    if (value === 'dir') output += `<span class="prompt-path">${key}/</span>  `;
                    else output += `<span class="success">${key}</span>  `;
                }
                printOutput(output);
                break;

            case 'cat':
                if (!arg1) { printOutput("cat: missing operand", "error"); return; }
                if (fileContents[arg1]) {
                    printOutput(fileContents[arg1]);
                } else {
                    printOutput(`cat: ${arg1}: No such file or directory`, "error");
                }
                break;

            case 'cd':
                if (!arg1 || arg1 === "~") {
                    currentPath = "~";
                } else if (arg1 === "..") {
                    currentPath = "~"; // Simple logic for demo
                } else if (fileSystem["~"][arg1] === "dir") {
                    currentPath = "~/projects";
                } else {
                    printOutput(`bash: cd: ${arg1}: No such file or directory`, "error");
                }
                updatePrompt();
                break;

            case 'whoami':
                printOutput("visitor");
                break;

            case 'nmap':
                 if (!arg1) { printOutput("nmap: missing target IP", "error"); return; }
                 printOutput(`Starting Nmap 7.94 at ${new Date().toLocaleTimeString()}...`);
                 setTimeout(() => {
                     printOutput(`
Nmap scan report for ${arg1}
Host is up (0.00042s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

Nmap done: 1 IP address (1 host up) scanned in 1.42 seconds
                     `);
                     scrollToBottom();
                 }, 1500);
                 break;
            
            case 'sudo':
                 printOutput(`[sudo] password for ${user}:`, "info");
                 // Simulation stops here to keep it simple, but adds realism
                 setTimeout(() => {
                    printOutput("Sorry, try again.", "error");
                    scrollToBottom();
                 }, 2000);
                 break;

            case 'neofetch':
                printOutput(`
       <span class="prompt-symbol">_,met$$$$$gg.</span>      <span class="prompt-user">user</span>@<span class="prompt-path">kali</span>
    <span class="prompt-symbol">,g$$$$$$$$$$$$$$$P.</span>   ----------------
  <span class="prompt-symbol">,g$$P"     """Y$$.".</span>    <span class="info">OS</span>: Kali GNU/Linux Rolling x86_64
 <span class="prompt-symbol">,$$P'              \`$$$.</span> <span class="info">Host</span>: VirtualBox 1.2
<span class="prompt-symbol">',$$P       ,ggs.     \`$$b:</span> <span class="info">Kernel</span>: 6.6.9-amd64
<span class="prompt-symbol">\`d$$'     ,$P"'   .    $$$</span> <span class="info">Uptime</span>: 2 hours, 4 mins
 <span class="prompt-symbol">$$P      d$'     ,    $$P</span> <span class="info">Shell</span>: bash 5.2.21
 <span class="prompt-symbol">$$:      $$.   -    ,d$$'</span> <span class="info">Terminal</span>: /dev/pts/0
 <span class="prompt-symbol">$$;      Y$b._   _,d$P'</span>  
 <span class="prompt-symbol">Y$$.    \`.\`"Y$$$$P"'</span>    
 <span class="prompt-symbol">\`$$b      "-.__</span>       
  <span class="prompt-symbol">\`Y$$</span>
   <span class="prompt-symbol">\`Y$$.</span>
     <span class="prompt-symbol">\`$$b.</span>
       <span class="prompt-symbol">\`Y$$b.</span>
          <span class="prompt-symbol">\`"Y$b._</span>
              <span class="prompt-symbol">\`"""</span>
                `);
                break;

            default:
                printOutput(`bash: ${cmd}: command not found`, "error");
        }
    }

    // --- HELPER FUNCTIONS ---
    function printOutput(text, type="standard") {
        const div = document.createElement('div');
        div.className = `output ${type}`;
        div.innerHTML = text;
        terminal.appendChild(div);
        scrollToBottom();
    }

    function scrollToBottom() {
        const window = document.getElementById('terminal-window');
        window.scrollTop = window.scrollHeight;
    }

</script>
</body>
</html>
